# 이상한 나라의 객체

이상한 나라의 앨리스는 정원에 들어가기 위하여 자신의 키를 변화시킨다.
앨리스의 상태는 특정 시점의 앨리스의 키이며 키를 변화 시키는 것은 앨리스의 행동이다.

상태를 결정하는 것은 행동이지만 행동의 결과를 결정하는 것은 상태이다.
앨리스가 포션을 먹는 행동을 통해 결과적으로 키가 더 커진 상태가 된다.(행동이 상태 결정)
앨리스가 포션을 먹기 전 키가 얼마였느냐에 따라 포션을 먹은 후 키가 결정된다.(행동의 결과를 상태가 결정)

상태에 따라 행동에 결과가 달라지는 다른 예로는 
`앨리스가 문을 통과하는 행동`은 `앨리스의 키(상태)`에 달렸다.

앨리스는 어떠한 상태여도 앨리스로 식별할 수 있다.

앨리스의 특징
* 앨리스는 상태를 가지며 상태를 변경할 수 있다.
* 앨리스의 상태를 변경시키는 것은 앨리스의 행동이다.
* 어떤 상태여도 앨리스는 식별할 수 있다.

## 객체, 그리고 소프트웨어 나라

앨리스를 객체로 바꾸어 생각해 보자

객체의 특성을 이해하기 위하여 책에서는 상태, 행동, 식별자를 지닌 실체로 보는 것을 효과적이라고 한다.

### 상태

객체가 주변 환경과의 상호작용에 어떻게 반응하는가는 그 시점까지 객체에 어떤 일이 발생했느냐에 좌우된다.
앨리스가 문을 통과하기 위해서는 키가 문 높이보다 작아야 하는 거처럼

상태는 과거의 행동을 모르더라도 현재 행동의 결과를 쉽게 판단하게 해준다.

객체를 사용해 다른 객체의 상태를 표현해야 할 때가 있다. 
객체의 상태는 단순한 값과 객체의 조합으로 표현이 가능하며 
상태를 구성하는 모든 특징을 프로퍼티라고 한다.

객체와 객체 사이의 의미 있는 연결을 링크라고 한다.
객체를 구성하는 단순한 값은 속성이라고 한다.

객체는 자율적인 존재이다.
객체는 다른 객체의 상태를 접근, 변경할 수 없다.

### 행동

객체의 상태는 저절로 변경되지 않는다.
상태가 변하는 것은 행동에 의해서다(앨리스가 포션을 먹는 거처럼)

상태와 행동 사이에는 다음과 같은 관계가 있다.

* 객체의 행동은 상태에 영향을 받는다.
* 객체의 행동은 상태를 변경시킨다.

상태라는 개념을 이용하여 행동을 다음과 같이 서술한다.

* 상호작용이 현재의 상태에 어떤 방식으로 의존하는가
* 상호작용이 어떻게 현재의 상태를 변경시키는가.

객체들은 협력을 통해 서비스를 제공한다.
객체는 협력할 수 있는 방법은 행동이다.

객체는 협력을 하면서 다른 객체에 상태 변경을 유발한다.
포션을 먹으면 앨리스의 키가 변화하지만 포션의 양도 줄어든다.

객체의 행동은 두 가지의 효과를 서술해야 한다.
* 객체 자신의 상태 변경
* 행동 내에서 협력하는 다른 객체에 대한 메시지 전송

객체지향의 세계에서는 모든 객체는 자신의 상태를 스스로 관리하는 자율적인 존재다.
앨리스가 음료를 마시면 음료에게 메시지를 보내 마셨다고 전달한다.

객체는 상태를 캡슐안에 감춰 외부로 노출하지 않고 행동을 노출하고 행동을 통해 접근을 할 수 있다. (캡슐화)

### 식별자

객체를 구분한다는 것은 서로 구별할 수 있는 프로퍼티가 있다. 이것을 식별자라고 한다.
객체는 식별자를 가지지만 값은 가지지 않는다.

값이 같은지 판단할 수 있는 성질을 동등성이라고 한다.

객체는 시간에 따라 변경되는 상태를 포함하며, 행동을 통해 상태를 변경한다.
두 객체의 상태가 완전히 똑같더라도 두 객체는 별개로 취급해야 한다.

식별자를 기반으로 객체가 같은지를 판단할 수 있는 성질을 동일성이라고 한다.

위의 세게를 생각해 보며 앨리스의 특징에서 앨리스를 객체로 바꾸어 다시 생각해 보자
* 객체는 상태를 가지며 상태는 변경 가능하다.
* 객체의 상태를 변경시키는 것은 객체의 행동이다.
* 객체는 어떤 상태에 있더라도 유일하게 식별 가능하다.

## 기계로서의 객체
개발자들의 주요 업무는 객체의 상태를 조회하고 객체의 상태를 변경하는 것이다.
상태 조회:query
상태 변경:command

버틀란드 마이어는 객체를 기계로 비유하였다.
사람은 기계의 내부를 확인할 수 있으며 외부의 버튼을 통해서 기계외 상호작용한다.
버튼을 눌러 상태를 변경하고, 버튼을 눌러 객체의 상태를 조회한다.
버튼을 눌러 메시지를 전송하고 동작은 기계 스스로가 결정한다.
객체의 자율성을 묘사한다.

버튼눌러 기계와 상호작용하는 것은 행동을 통해 객체에 접근하는 것을 표현한다.

식별자 역시 기계를 통해 설명 가능하다. 
모든 값이 같은 두개의 기계라도 두 기계는 별개의 기계로 인식한다.

## 행동이 상태를 결정한다.

상태를 먼저 결정하고 행동을 나중에 결정하는 방법은 설계의 좋은 방법이 아니다.

캡슐화가 저해된다.
상태에 초점을 맞출 경우 인터페이스에 노출되버릴 확률이 높아진다.
협력이 저하된다.
상태를 먼저 고려하는 방식은 협력에 적합하지 못하다.
객체의 재사용성이 저하된다.
협력이 저하되어 재사용성이 저하된다.

객체는 협력을 위해 존재하고 협력을 위해서는 행동이 초점이 되어야 한다.

협력 안에서 객체의 행동은 객체가 완수해야 되는 책임을 의미한다.
이러한 설계를 책임-주도 설계라고 한다.
